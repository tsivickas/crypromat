

<html>
<head>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js" integrity="sha256-/H4YS+7aYb9kJ5OKhFYPUjSJdrtV6AeyJOtTkw6X72o=" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://yui-s.yahooapis.com/pure/0.6.0/pure-min.css">
<meta name="viewport" content="width=device-width, initial-scale=1">

  
<script>

 var encrypted = CryptoJS.AES.encrypt('string','pass' );
encrypted = encrypted.toString();

//encodeURIComponent(query);

console.log(encrypted);

 var decrypted = CryptoJS.AES.decrypt(encrypted , 'pass').toString(CryptoJS.enc.Utf8);

console.log(decrypted );

document.addEventListener('submit', function(e) {
  if (e.target.id === 'forma1') {
    e.preventDefault();
    var forma = e.target;
    var sVal = forma.querySelector('input[name=s]').value;
    var pVal = forma.querySelector('input[name=p]').value;
    var encrypted = CryptoJS.AES.encrypt(sVal, pVal).toString();
    encrypted = encodeURIComponent(encrypted);
    var str = 'https://tsivickas.github.io/crypromat/?d=' + encrypted;
    var link = document.createElement('a');
    link.href = str;
    link.target = '_blank';
    link.textContent = str;
    forma.appendChild(link);
    forma.reset();
  }
});


document.addEventListener('DOMContentLoaded', function() {
   const queryString = window.location.search;
   const urlParams = new URLSearchParams(queryString);
   var dValue = urlParams.get('d');
   var eValue = urlParams.get('e');
   //console.log('Value of "d" parameter:', dValue);

   dValue = decodeURIComponent(dValue);
   eValue = decodeURIComponent(eValue);

   const inputElement1 = document.forms['forma1'].querySelector('input[name="s"]');
   const inputElement2 = document.forms['forma2'].querySelector('input[name="s"]');
   if (eValue) inputElement1.value = eValue;
   if (dValue) inputElement2.value = dValue;
});






</script>
  
</head>
<body>
<div class="pure-g">
<div class="pure-u-1-4"></div>
<div class="pure-u-1-2">

  
<form id="forma1" class="pure-form" >
<input type="text" name="s" placeholder="string" />
<input type="text" name="p" placeholder="pass" />
<button type="submit" class="pure-button pure-button-primary">Encode</button>
<br />
</form>

<form id="forma2" class="pure-form" >
<input type="text" name="s" placeholder="string" />
<input type="text" name="p" placeholder="pass" />
<button type="submit" class="pure-button pure-button-primary">Decode</button>
<br />
</form>
  
  
</div>
<div class="pure-u-1-4"></div>
</div>
</body>
</html>





